<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시물 목록</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function confirmDelete() {
            return confirm('정말 삭제하시겠습니까?');
        }
    </script>
</head>
<body class="container mt-4">
<h1>게시물 목록</h1>
<a href="/posts/new" class="btn btn-success mb-2">새 게시물 작성</a>
<table class="table table-bordered">
    <thead>
    <tr>
        <th>
            <a th:href="@{/posts(page=${posts.number}, sortBy='title', direction='asc')}">제목 ↑</a>
            |
            <a th:href="@{/posts(page=${posts.number}, sortBy='title', direction='desc')}">↓</a>
        </th>
        <th>
            <a th:href="@{/posts(page=${posts.number}, sortBy='author', direction='asc')}">작성자 ↑</a>
            |
            <a th:href="@{/posts(page=${posts.number}, sortBy='author', direction='desc')}">↓</a>
        </th>
        <th>
            <a th:href="@{/posts(page=${posts.number}, sortBy='createdDate', direction='asc')}">생성일 ↑</a>
            |
            <a th:href="@{/posts(page=${posts.number}, sortBy='createdDate', direction='desc')}">↓</a>
        </th>
        <th>수정</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="post : ${posts.content}">
        <td><a th:href="@{/posts/{id}(id=${post.id})}" th:text="${post.title}">제목</a></td>
        <td th:text="${post.author}"></td>
        <td th:text="${post.createdDate}"></td>
        <td>
            <a th:href="@{/posts/{id}/edit(id=${post.id})}" class="btn btn-sm btn-primary">수정</a>
            <form th:action="@{/posts/{id}/delete(id=${post.id})}" method="post" style="display:inline;" onsubmit="return confirmDelete();">
                <button type="submit" class="btn btn-sm btn-danger">삭제</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

<!-- 페이지 네비게이션 -->
<nav aria-label="Page navigation">
    <ul class="pagination">
        <li class="page-item" th:classappend="${posts.first}? 'disabled'">
            <a class="page-link" th:href="@{/posts(page=${posts.number - 1}, size=${posts.size}, sortBy=${sortBy}, direction=${direction})}">←</a>
        </li>
        <li class="page-item" th:each="i : ${#numbers.sequence(0, posts.totalPages - 1)}" th:classappend="${i == posts.number}? 'active'">
            <a class="page-link" th:href="@{/posts(page=${i}, size=${posts.size}, sortBy=${sortBy}, direction=${direction})}" th:text="${i + 1}">1</a>
        </li>
        <li class="page-item" th:classappend="${posts.last}? 'disabled'">
            <a class="page-link" th:href="@{/posts(page=${posts.number + 1}, size=${posts.size}, sortBy=${sortBy}, direction=${direction})}">→</a>
        </li>
    </ul>
</nav>

<a href="/" class="btn btn-secondary">메인으로</a>
</body>
</html>
