<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${isEdit} ? '게시물 수정' : '게시물 작성'">게시물 작성</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .is-invalid {
            border-color: #dc3545;
        }
    </style>
</head>
<body class="container mt-4">
<h1 th:text="${isEdit} ? '게시물 수정' : '게시물 작성'">게시물 작성</h1>

<form th:action="${isEdit} ? @{/posts/{id}/edit(id=${postForm.id})} : @{/posts/new}" th:object="${postForm}" method="post" class="mt-3">
    <input type="hidden" th:field="*{id}" />
    <div class="mb-3">
        <label>제목</label>
        <input type="text" th:field="*{title}" class="form-control" th:classappend="${#fields.hasErrors('title')} ? ' is-invalid'">
        <div th:if="${#fields.hasErrors('title')}" th:errors="*{title}" class="text-danger"></div>
    </div>

    <div class="mb-3">
        <label>내용</label>
        <textarea th:field="*{content}" class="form-control" rows="5"
                  th:classappend="${#fields.hasErrors('content')} ? ' is-invalid'"></textarea>
        <div th:if="${#fields.hasErrors('content')}" th:errors="*{content}" class="text-danger"></div>
    </div>

    <div class="mb-3">
        <label>작성자</label>
        <input type="text" th:field="*{author}" class="form-control" placeholder="익명 가능" th:attr="readonly=${isEdit} ? 'readonly' : null">
    </div>

    <button type="submit" class="btn btn-primary" th:text="${isEdit} ? '수정' : '등록'">등록</button>
    <a th:href="@{/posts}" class="btn btn-secondary">취소</a>
</form>
</body>
</html>
